#!/bin/sh

# Verify gpaste is running, fail otherwise
[[ -z `pgrep gpaste-daemon` ]] && echo 'Failed to retrieve history from Clipster, please ensure daemon is running!' && exit 1

G_HIST="$(gpaste-client --oneline | awk 'NF > 0')"

SELECTION="$(echo "$G_HIST" | rofi -dmenu -i -lines 10 -width 40 -p 'Clipboard selection')"

if [ -n "$SELECTION" ]; then

  EXACT_SELECTION="$(echo "$SELECTION" | awk '{gsub(/:/, ""); print $1}')"
  gpaste-client select "$EXACT_SELECTION"

fi
